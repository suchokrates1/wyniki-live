import{m as s}from"./main-BwoPs4af.js";window.Alpine=s;s.data("tennisApp",()=>({courts:{},loading:!0,error:null,lastUpdate:null,lang:"pl",init(){this.connectSSE(),this.fetchInitialData()},async fetchInitialData(){try{const t=await fetch("/api/courts");if(!t.ok)throw new Error("Failed to fetch courts");const e=await t.json();this.courts=e.courts||{},this.loading=!1,this.lastUpdate=new Date}catch(t){this.error=t.message,this.loading=!1}},connectSSE(){const t=new EventSource("/api/stream");t.addEventListener("court_update",e=>{const r=JSON.parse(e.data);this.courts[r.court_id]=r,this.lastUpdate=new Date}),t.onerror=()=>{this.error="Połączenie przerwane",setTimeout(()=>this.connectSSE(),5e3)}},getCourtIds(){return Object.keys(this.courts).sort()},isMatchActive(t){var e,r;return((r=(e=this.courts[t])==null?void 0:e.match_status)==null?void 0:r.active)||!1},getScore(t,e){const r=this.courts[t];if(!r)return{sets:[],points:"-"};const a=r[e];return a?{sets:a.sets||[],points:a.points||"0"}:{sets:[],points:"-"}},formatTime(t){const e=Math.floor(t/60),r=t%60;return`${e}:${r.toString().padStart(2,"0")}`}}));s.store("theme",{current:localStorage.getItem("theme")||"light",toggle(){this.current=this.current==="light"?"dark":"light",localStorage.setItem("theme",this.current),document.documentElement.setAttribute("data-theme",this.current)},init(){document.documentElement.setAttribute("data-theme",this.current)}});s.start();s.store("theme").init();
